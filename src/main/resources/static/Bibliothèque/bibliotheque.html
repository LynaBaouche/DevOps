<!DOCTYPE html>
<html lang="fr">
<head>


    <script>
        const user = JSON.parse(localStorage.getItem("utilisateur"));
        if (!user) {
            alert("⚠️ Vous devez vous connecter pour accéder a la bibliothèque de l'université.");
            window.location.href = "/login.html";
        }
    </script>
    <meta charset="UTF-8">
    <title>Bibliothèque – Disponibilité des Places</title>

    <!-- Styles -->
    <link rel="stylesheet" href="bibliotheque.css">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<!-- NAVBAR -->
<header class="main-header">
    <div class="header-container">

        <!-- Logo -->
        <div class="header-left">
            <div class="logo">
                <img src="/images/etudlife.png" alt="Logo EtudLife" class="logo-icon">
                <span class="logo-text"><strong>Etud</strong>Life</span>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="header-nav">
            <a href="/index.html">Accueil</a>
            <a href="/Agenda.html">Agenda</a>
            <a href="/upload.html">Cours</a>
            <a href="#">Transports</a>
            <a href="/Bibliothèque/bibliotheque.html" class="active">Bibliothèque</a>
            <a href="#">Campus</a>
            <a href="/Recette/cuisine.html">Cuisine</a>
            <a href="/Annonce/annonces.html" >Annonces</a>
            <a href="/messages.html">Messages</a>
            <a href="/proches.html">Ajouter un proche</a>
        </nav>

        <!-- Compte utilisateur -->
        <div class="account-menu">
            <img src="/images/compte.png" class="icon-img" id="account-icon">

            <div class="dropdown-menu" id="dropdown-menu">
                <p class="menu-title">Invité</p>
                <p class="menu-subtitle">Non connecté</p>

                <a id="btn-profil" class="menu-item connected-only" style="display:none;">Profil</a>
                <a href="/login.html" class="menu-item disconnected-only">Se connecter</a>
                <a href="/inscription.html" class="menu-item disconnected-only">Créer un compte</a>
                <a href="#" class="menu-item">Aide</a>
                <a id="logout-btn" class="menu-item connected-only" style="display:none;">Se déconnecter</a>
            </div>
        </div>

    </div>

    <!-- Sous-menu -->
    <nav class="bu-submenu">
        <a href="catalogue.html">Catalogue</a>
        <a href="emprunts.html">Mes Emprunts</a>
        <a href="reservation.html">Réservations</a>
        <a href="places.html">Réserver une Place</a>
        <a href="services.html">Services</a>
    </nav>
</header>


<!-- CONTENU -->
<main class="page">

    <h1 class="page-title">Disponibilité des places à la bibliothèque</h1>
    <p class="page-subtitle">Données actualisées en temps réel par étage.</p>

    <!-- BARRE DE RECHERCHE -->
    <section class="search-area">
        <input type="text" id="searchInput" placeholder="Rechercher une salle, un étage, une zone…">
        <select id="categorySelect">
            <option value="all">Toutes les zones</option>
            <option value="individuel">Travail individuel</option>
            <option value="groupe">Travail de groupe</option>
            <option value="silencieux">Silencieux</option>
            <option value="info">Salle informatique</option>
        </select>
    </section>

    <!-- STATISTIQUES -->
    <section class="stats-bar">
        <span><strong id="totalPlaces">0</strong> places au total</span>
        <span><strong id="totalDisponibles">0</strong> disponibles</span>
        <span><strong id="totalOccupees">0</strong> occupées</span>
        <span>Dernière mise à jour : <strong id="lastUpdateLabel">—</strong></span>
    </section>

    <!-- WIDGET -->
    <section class="widget">
        <h3>Taux d’occupation actuel</h3>
        <div class="widget-content">
            <div id="circle" class="circle">
                <div class="circle-inner">
                    <span id="percent">0%</span>
                    <small>occupée</small>
                </div>
            </div>

            <div class="widget-info">
                <p id="libresInfo">Places libres : —</p>
                <p id="occupeesInfo">Places occupées : —</p>
                <p id="confortInfo">Estimation : —</p>
            </div>
        </div>
    </section>

    <!-- CARTES ÉTAGES -->
    <section class="cards" id="cards"></section>

</main>

<script src="bibliotheque.js"></script>

</body>
</html>
